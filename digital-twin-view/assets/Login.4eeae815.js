import{g as e,_ as a,o as l,a as s,u as i,r as d,b as t,c as o,d as u,E as r,e as n,f as c,h as p,i as g,w as v,j as m,k as f,l as w,p as h,m as x}from"./index.7bee6b1e.js";import{E as b,a as _}from"./index.025fda42.js";const y=e=>(h("data-v-4ed7be40"),e=e(),x(),e),k={class:"login-wrapper"},V={class:"login"},z=y((()=>p("div",{class:"flex-center-box logo-div"},"     数字孪生平台 ",-1))),C={class:"form-panel"},E=y((()=>p("div",{style:{height:"30%"},class:"flex-center-box"},[p("div",{style:{"font-size":"24px","font-weight":"bold"}},"账号登录")],-1))),L={style:{height:"70%","align-items":"baseline"},class:"flex-center-box"},U=["src"],j=["src"],q={style:{display:"inline-block"}},I=["src"],R={class:"flex-center-box"},S=["src"],F=a({__name:"Login",setup(a){function h(e){13==e.keyCode&&B()}l((()=>{G(),window.addEventListener("keydown",h)})),s((()=>{window.removeEventListener("keydown",h,!1)}));const x=i(),y=d({account:"",pwd:"",code:"",uuid:""}),F=d(null),A=t({account:[{required:!0,message:"用户名不能为空",trigger:"blur"}],pwd:[{required:!0,message:"密码不能为空",trigger:"blur"}],code:[{required:!0,message:"验证码不能为空",trigger:"blur"}]});async function B(){let{account:e,pwd:a,code:l,uuid:s}=y.value;await F.value.validate((i=>{i&&x.login({account:e,pwd:a,code:l,uuid:s}).then((e=>{e&&o.push({path:"/"})}))}))}const D=d("");function G(){e("/authService/auth/login/uuid").then((e=>{let a=e.result;y.value.uuid=a,D.value=u.webURL+"/authService/auth/getImageCode/"+a}))}return(e,a)=>{const l=r,s=b,i=n,d=_;return m(),c("div",k,[p("div",V,[z,p("div",C,[E,p("div",L,[g(d,{model:y.value,rules:A,ref_key:"ruleFormRef",ref:F},{default:v((()=>[g(s,{prop:"account"},{default:v((()=>[g(l,{modelValue:y.value.account,"onUpdate:modelValue":a[0]||(a[0]=e=>y.value.account=e),placeholder:"请输入用户名",size:"large"},{prefix:v((()=>[p("img",{class:"input-prefix-img",src:f("/digital-twin-view/assets/user.860d1ef0.svg")},null,8,U)])),_:1},8,["modelValue"])])),_:1}),g(s,{prop:"pwd"},{default:v((()=>[g(l,{modelValue:y.value.pwd,"onUpdate:modelValue":a[1]||(a[1]=e=>y.value.pwd=e),placeholder:"请输入密码",size:"large",type:"password"},{prefix:v((()=>[p("img",{class:"input-prefix-img",src:f("/digital-twin-view/assets/lock.d71643f7.svg")},null,8,j)])),_:1},8,["modelValue"])])),_:1}),g(s,{prop:"code"},{default:v((()=>[p("div",q,[g(l,{modelValue:y.value.code,"onUpdate:modelValue":a[2]||(a[2]=e=>y.value.code=e),placeholder:"请输入验证码",size:"large"},{prefix:v((()=>[p("img",{class:"input-prefix-img",src:f("/digital-twin-view/assets/shield.7b46f098.svg")},null,8,I)])),_:1},8,["modelValue"])]),p("div",R,[p("img",{src:D.value,class:"valid-code-img",onClick:G},null,8,S)])])),_:1}),g(s,null,{default:v((()=>[g(i,{size:"large",type:"primary",onClick:a[3]||(a[3]=e=>B()),style:{width:"100%"}},{default:v((()=>[w("登录")])),_:1})])),_:1})])),_:1},8,["model","rules"])])])])])}}},[["__scopeId","data-v-4ed7be40"]]);export{F as default};
